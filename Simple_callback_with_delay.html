<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>My Personal Dashboard ‚Äî Offline</title>
<style>
  :root{
    --bg:#f4f6fb; --card:#ffffff; --accent:#4f46e5; --muted:#666;
    --glass: rgba(255,255,255,0.6);
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#eef2ff 0%,var(--bg) 100%);color:#111}
  .app{display:flex;min-height:100vh}
  /* Sidebar */
  .sidebar{width:78px;background:linear-gradient(180deg,var(--accent),#6d28d9);color:#fff;padding:12px 8px;display:flex;flex-direction:column;align-items:center;gap:12px}
  .logo{width:48px;height:48px;border-radius:10px;background:rgba(255,255,255,0.12);display:flex;align-items:center;justify-content:center;font-weight:700}
  .navbtn{width:56px;height:56px;border-radius:10px;border:0;background:transparent;color:#fff;display:flex;align-items:center;justify-content:center;flex-direction:column;font-size:11px;cursor:pointer;opacity:0.9}
  .navbtn.active{background:rgba(255,255,255,0.12)}
  .navlabel{font-size:11px;margin-top:4px}
  /* Main */
  .main{flex:1;padding:14px;display:flex;flex-direction:column;gap:12px}
  header{display:flex;align-items:center;gap:12px}
  header h1{font-size:18px;margin:0}
  .container{display:grid;grid-template-columns:1fr;gap:12px}
  .card{background:var(--card);padding:12px;border-radius:12px;box-shadow:0 6px 18px rgba(10,10,20,0.06)}
  .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  input,textarea,select{width:100%;padding:8px;margin:6px 0;border-radius:8px;border:1px solid #e6e6ef;font-size:14px}
  button{cursor:pointer;padding:8px 10px;border-radius:8px;border:0;background:var(--accent);color:#fff}
  small{color:var(--muted)}
  .tiny{font-size:13px;color:var(--muted)}
  .list-item{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px dashed #f0f0f4}
  .kpi{display:flex;gap:10px;align-items:center}
  .kpi .pill{background:linear-gradient(90deg,#eef2ff,#fff);padding:6px 10px;border-radius:999px;font-weight:600}
  .section-title{display:flex;justify-content:space-between;align-items:center}
  .flex{display:flex;gap:8px;align-items:center}
  @media (max-width:640px){
    .sidebar{width:64px;padding:10px}
    header h1{font-size:16px}
  }
</style>
</head>
<body>
<div class="app">
  <nav class="sidebar" aria-label="sidebar">
    <div class="logo" title="Dashboard">MD</div>
    <button class="navbtn active" data-section="dashboard" title="Dashboard">üè†<div class="navlabel">Home</div></button>
    <button class="navbtn" data-section="assignments" title="Assignments">üìù<div class="navlabel">Assign</div></button>
    <button class="navbtn" data-section="habits" title="Habits">‚úÖ<div class="navlabel">Habits</div></button>
    <button class="navbtn" data-section="leetcode" title="LeetCode">üíª<div class="navlabel">LC</div></button>
    <button class="navbtn" data-section="resources" title="Resources">üìö<div class="navlabel">Res</div></button>
    <button class="navbtn" data-section="notes" title="Notes & Flashcards">üóÇÔ∏è<div class="navlabel">Notes</div></button>
    <button class="navbtn" data-section="journal" title="Journal">üìì<div class="navlabel">Journal</div></button>
    <button class="navbtn" data-section="expenses" title="Expenses">üí∏<div class="navlabel">Exp</div></button>
    <button class="navbtn" data-section="settings" title="Settings">‚öôÔ∏è<div class="navlabel">Set</div></button>
  </nav>

  <main class="main">
    <header>
      <h1 id="pageTitle">Dashboard</h1>
      <div style="margin-left:auto" class="tiny">Offline ‚Ä¢ data saved on this device</div>
    </header>

    <div class="container">
      <div id="contentArea"></div>
    </div>
  </main>
</div>

<script>
/* ---------- STORAGE KEYS ---------- */
const STORAGE = {
  assignments:'md_assignments_v1', habits:'md_habits_v1', quotes:'md_quotes_v1',
  leetcode:'md_leetcode_v1', resources:'md_resources_v1', notes:'md_notes_v1',
  journal:'md_journal_v1', expenses:'md_expenses_v1', settings:'md_settings_v1'
};

/* ---------- UTIL ---------- */
const el=sel=>document.querySelector(sel);
const elAll=sel=>Array.from(document.querySelectorAll(sel));
const uid=()=>Date.now()+Math.floor(Math.random()*999);
function save(k,d){localStorage.setItem(k,JSON.stringify(d));}
function load(k,fallback){try{return JSON.parse(localStorage.getItem(k))||fallback}catch(e){return fallback}}
function fmtDate(d){if(!d)return'';const dt=new Date(d);return dt.toLocaleDateString();}
function fmtDateISO(d){if(!d)return'';const dt=new Date(d);return dt.toISOString().slice(0,10);}

/* ---------- NAV ---------- */
elAll('.navbtn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    elAll('.navbtn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    openSection(btn.dataset.section);
  });
});

/* ---------- DASHBOARD ---------- */
function openSection(name){
  document.getElementById('pageTitle').textContent = {
    dashboard:'Dashboard', assignments:'Assignments', habits:'Habits & Fitness',
    leetcode:'LeetCode & Study', resources:'Exam Resources', notes:'Notes & Flashcards',
    journal:'Journal & Mood', expenses:'Expenses', settings:'Settings'
  }[name]||'Dashboard';
  const content=document.getElementById('contentArea');
  content.innerHTML='';
  if(name==='dashboard') return renderDashboard(content);
  if(name==='assignments') return renderAssignments(content);
  if(name==='habits') return renderHabits(content);
  if(name==='leetcode') return renderLeetcode(content);
  if(name==='resources') return renderResources(content);
  if(name==='notes') return renderNotes(content);
  if(name==='journal') return renderJournal(content);
  if(name==='expenses') return renderExpenses(content);
  if(name==='settings') return renderSettings(content);
}

/* ---------- Dashboard content ---------- */
function renderDashboard(root){
  const assignments=load(STORAGE.assignments,[]);
  const upcoming=assignments.filter(a=>new Date(a.due)-Date.now()<=7*24*60*60*1000 && new Date(a.due)>=Date.now()).slice(0,3);
  const streak=load(STORAGE.leetcode,{streak:0}).streak||0;
  const habits=load(STORAGE.habits,{today:{}}).today||{};
  const savedQuotes=load(STORAGE.quotes,[]);
  root.innerHTML=`
    <div class="card section-title">
      <div>
        <div class="kpi">
          <div class="pill">Streak: <strong id="dashStreak">${streak}</strong>d</div>
          <div class="pill">Assignments: <strong id="dashAssign">${assignments.length}</strong></div>
        </div>
        <div style="margin-top:10px" class="tiny">Today's quick view</div>
      </div>
      <div class="tiny" style="text-align:right">
        <button onclick="openSection('assignments')">Open Assignments</button>
        <button onclick="openSection('leetcode')">Open LC</button>
      </div>
    </div>
    <div class="row">
      <div class="card" style="flex:1">
        <h3>Today's Quote</h3>
        <div id="dashQuote" class="tiny">${savedQuotes[0]?.text||sampleQuotes()[0]}</div>
        <div style="margin-top:8px" class="flex">
          <button onclick="nextDashQuote()">Next</button>
          <button onclick="saveDashQuote()">Save</button>
        </div>
      </div>
      <div class="card" style="width:300px">
        <h3>Due in 7 days</h3>
        <div id="dashDue">${upcoming.length?upcoming.map(a=>`<div class="tiny">${a.title} ‚Äî ${fmtDate(a.due)}</div>`).join(''):'<div class="tiny">No upcoming due</div>'}</div>
      </div>
    </div>
    <div class="row">
      <div class="card" style="flex:1">
        <h3>Habits today</h3>
        <div class="tiny">Badham: <strong>${habits.badham?'‚úî':'‚Äî'}</strong> ‚Ä¢ Read: <strong>${habits.read?'‚úî':'‚Äî'}</strong> ‚Ä¢ Water: <strong>${habits.water||0}</strong></div>
        <div style="margin-top:8px"><button onclick="openSection('habits')">Update habits</button></div>
      </div>
      <div class="card" style="width:320px">
        <h3>Quick actions</h3>
        <div class="flex" style="flex-direction:column">
          <button onclick="openSection('notes')">Open Notes / Flashcards</button>
          <button onclick="openSection('resources')">Open Resources</button>
          <button onclick="openSection('journal')">Write Journal</button>
        </div>
      </div>
    </div>
  `;
}

/* ---------- Sample Quotes ---------- */
function sampleQuotes(){ return [
  "Small steps every day add up to big results.",
  "Consistency > intensity.",
  "Learn a little every day.",
  "Fail fast, learn faster.",
  "Focus on progress, not perfection."
];}
function nextDashQuote(){const q=sampleQuotes()[Math.floor(Math.random()*5)];document.getElementById('dashQuote').textContent=q;}
function saveDashQuote(){let arr=load(STORAGE.quotes,[]);const q=document.getElementById('dashQuote').textContent;arr.unshift({text:q,ts:Date.now()});save(STORAGE.quotes,arr);alert('Quote saved');}

/* ---------- INIT ---------- */
openSection('dashboard');
</script>
</body>
</html>
